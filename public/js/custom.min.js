function setAttributes(e,t){for(var n in t)e.setAttribute(n,t[n])}!function(e,t){jQuery.fn[t]=function(e){return e?this.bind("resize",(n=e,function(){var e=this,t=arguments;o?clearTimeout(o):a&&n.apply(e,t),o=setTimeout(function(){a||n.apply(e,t),o=null},i||100)})):this.trigger(t);var n,i,a,o}}(jQuery,"smartresize"),"undefined"!=typeof NProgress&&NProgress.start();var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");function init_sidebar(){var n=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),n=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),i=e<n?n:e;i-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",i)};$SIDEBAR_MENU.find("a").on("click",function(e){var t=$(this).parent();t.is(".active")?(t.removeClass("active active-sm"),$("ul:first",t).slideUp(function(){n()})):(t.parent().is(".child_menu")?$BODY.is(".nav-sm")&&($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()):($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),t.addClass("active"),$("ul:first",t).slideDown(function(){n()}))}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),n(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find("a[href='"+CURRENT_URL+"']").parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){n()}).parent().addClass("active"),$(window).smartresize(function(){n()}),n(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}function init_panel(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),n=e.find(".x_content");e.attr("style")?n.slideToggle(200,function(){e.removeAttr("style")}):(n.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){$(this).closest(".x_panel").remove()})}function init_tooltip(){$("[data-toggle='tooltip']").tooltip({container:"body"})}$(document).ready(function(){init_sidebar(),init_panel(),init_tooltip()});var chartOption={hover:{intersect:!1},tooltips:{mode:"index",intersect:!1,itemSort:function(e,t){return t.datasetIndex-e.datasetIndex},callbacks:{title:function(e,t){return t.tooltip[e[0].index]},labelColor:function(e,t){var n=e.datasetIndex+1,i=["rgba(102, 194, 255,","rgba(255, 115, 115,","rgba(130, 130, 130,"];return{borderColor:i[n=2<n?0:n]+" 1)",backgroundColor:i[n]+" 1)"}}}},scales:{yAxes:[{stacked:!0}]},elements:{line:{tension:0,borderWidth:1},point:{radius:0,borderWidth:2,hitRadius:20}}};function commonXMLHttpRequest(){var e=new XMLHttpRequest;return e.onreadystatechange=function(){500===e.status&&(window.location="/500")},e}function init_knob(){if(void 0!==$.fn.knob&&document.getElementById("knobInput")){console.log("init_knob");var t=commonXMLHttpRequest(),n=document;n.getElementById("labelSubmit").addEventListener("click",function(){n.getElementById("newMaxLabel").value=n.getElementById("newMaxLabel_text").innerText}),t.open("GET","/admin/getKnobData",!0),t.send(),t.addEventListener("load",function(){var e=JSON.parse(t.responseText);n.getElementById("knobInput").value=e.cur,n.getElementById("MaxLabel_text").innerText="현재 : "+e.cur+"개",$(".knob").knob({min:1,max:1*e.absolute,thickness:.2,displayPrevious:!0,inputColor:"#34495E",fgColor:"#34495E",change:function(e){},release:function(e){n.getElementById("newMaxLabel_text").innerText="변경 : "+e+"개"},cancel:function(){console.log("cancel : ",this)},draw:function(){this.cursorExt=.3;var e,t=this.arc(this.cv);return this.g.lineWidth=this.lineWidth,this.o.displayPrevious&&(e=this.arc(this.v),this.g.beginPath(),this.g.strokeStyle=this.pColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,e.s,e.e,e.d),this.g.stroke()),this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,t.s,t.e,t.d),this.g.stroke(),this.g.lineWidth=2,this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+1+2*this.lineWidth/3,0,2*Math.PI,!1),this.g.stroke(),!1}})})}}function init_SmartWizard(){void 0!==$.fn.smartWizard&&(console.log("init_SmartWizard"),$("#wizard").smartWizard(),$("#wizard_verticle").smartWizard({transitionEffect:"slide"}),$(".buttonNext").addClass("btn btn-success"),$(".buttonPrevious").addClass("btn btn-primary"))}function init_select2(){if(document.getElementById("select2Div0")){console.log("init_select2");for(var r=[[],[],[],[]],l=[],s=document,n=document.createDocumentFragment(),e=0;e<4;e++)$("#select2_multiple"+e).select2({maximumSelectionLength:2,placeholder:"이전 항목을 선택해주세요",containerCssClass:":all:",allowClear:!0,dropdownParent:$("#select2Div"+e)});var t=s.createElement("option");t.innerText="Project 명",t.setAttribute("display","none"),n.appendChild(t);var i=commonXMLHttpRequest();i.open("GET","/getData/getCustomData?un=pj&vi=-1",!0),i.send(),i.addEventListener("load",function(){r[0]=JSON.parse(i.responseText),r[0].forEach(function(e){var t=s.createElement("option");t.innerText=e.pj_name,n.appendChild(t)}),document.getElementById("select2_multiple0").appendChild(n)});for(var a=0;a<4;a++)$("#select2_multiple"+a).on("change",o(a));document.getElementById("customSubmitBtn").addEventListener("click",function(){if("Project 명"!==$("#select2_multiple0").val()){var t=commonXMLHttpRequest();t.open("POST","/access/deleteData",!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify({selectId:l})),t.addEventListener("load",function(){var e=JSON.parse(t.responseText);400===t.status?alert("결과 : "+e.error):alert("결과 : "+e.success),location.reload()})}})}function o(o){return function(){var e=$("#select2_multiple"+o).val(),t=$("#select2_multiple"+o)[0].selectedIndex;if($.isEmptyObject(e)||"Project 명"===e){for(var n=3;o<n;n--)$("#select2_multiple"+n).attr("disabled",!0);l.splice(o)}else{var i;if(i=0===o?r[0][t-1].pj_id:1===o?r[1][t].build_id:2===o?r[2][t].class_id:r[3][t].method_id,l[o]=i,0<=o&&o<=2){var a=commonXMLHttpRequest();a.open("GET","/getData/getCustomData?un="+["bu","cl","te"][o]+"&vi="+i,!0),a.send(),a.addEventListener("load",function(){var n=document.createDocumentFragment();r[o+1]=[],$("#select2_multiple"+(o+1)).empty(),r[o+1]=JSON.parse(a.responseText),r[o+1].forEach(function(e){var t=s.createElement("option");e.buildno?t.innerText="(Build No."+e.buildno+") ":e.class_name?t.innerText=e.package_name+" / "+e.class_name:e.method_name&&(t.innerText=e.method_name),n.append(t)}),$("#select2_multiple"+(o+1)).append(n)}),$("#select2_multiple"+(o+1)).removeAttr("disabled")}}}}}function clear_modalDetail(){var e=document.getElementById("noChart"),t=document.getElementById("noInfo"),n=document.getElementById("pieChart_timeInfo"),i=document.getElementById("pieChart_passInfo");document.getElementById("panel_report").removeChild(document.getElementById("pieChart_mo"));var a=document.createElement("canvas");a.setAttribute("id","pieChart_mo"),document.getElementById("panel_report").appendChild(a),document.getElementById("panel_detailReport").removeChild(document.getElementById("classinfo"));var o=document.createElement("div");o.setAttribute("id","classinfo"),document.getElementById("panel_detailReport").appendChild(o),e.innerText="",t.innerText="",n.innerText="",i.innerText=""}function init_modal_detail(e,t){var C=commonXMLHttpRequest();C.open("GET","/getData/getModalDataDetail?pi="+e+"&bi="+t,!0),C.send(),C.addEventListener("load",function(){var e=JSON.parse(C.responseText),t=document.getElementById("noChart"),n=document.getElementById("noInfo"),i=document.getElementById("pieChart_timeInfo"),a=document.getElementById("pieChart_passInfo");if(clear_modalDetail(),0===e.classCount)t.innerText="실패한 Build입니다",n.innerText="실패한 Build입니다";else{for(var o,r=document.createDocumentFragment(),l="",s=-1,d=0;d<e.classCount;d++){if(e.nameData[d][0]!==l){l=e.nameData[d][0],s++,(o=document.createElement("tbody")).setAttribute("id","tbody"+s);var c=document.createElement("table");setAttributes(c,{id:"detailTable"+s,class:"table table-hover",style:"text-align:center;"});var m=document.createElement("thead"),u=document.createElement("tr"),p=document.createElement("th");p.innerText=e.nameData[d][0],u.appendChild(p),m.appendChild(u),c.appendChild(m),c.appendChild(o),r.appendChild(c)}var g=document.createElement("tr"),h=document.createElement("th"),f=document.createElement("th");h.setAttribute("class","col-lg-5 col-md-5 col-sm-5 col-xs-12"),h.innerText=e.nameData[d][1],g.appendChild(h),f.setAttribute("class","col-lg-7 col-md-7 col-sm-7 col-xs-12");var v=document.createElement("div");v.setAttribute("class","progress");var E=document.createElement("div"),_=document.createElement("div"),b=document.createElement("div");setAttributes(E,{id:"propass"+d,class:"progress-bar progress-bar-striped progress-pass",role:"progressbar","aria-valuenow":e.progressData.pass[d],"aria-valuemin":0,"aria-valuemax":e.progressData.sum[d],style:"width: "+e.progressData.passrate[d]+"%"}),E.innerText=e.progressData.pass[d],setAttributes(_,{id:"profail"+d,class:"progress-bar progress-bar-striped progress-fail",role:"progressbar","aria-valuenow":e.progressData.fail[d],"aria-valuemin":0,"aria-valuemax":e.progressData.sum[d],style:"width: "+e.progressData.failrate[d]+"%"}),_.innerText=e.progressData.fail[d],setAttributes(b,{id:"proskip"+d,class:"progress-bar progress-bar-striped progress-skip",role:"progressbar","aria-valuenow":e.progressData.skip[d],"aria-valuemin":0,"aria-valuemax":e.progressData.sum[d],style:"width: "+e.progressData.skiprate[d]+"%"}),b.innerText=e.progressData.skip[d],v.appendChild(E),v.appendChild(_),v.appendChild(b),f.appendChild(v),g.appendChild(f),o.appendChild(g)}document.getElementById("classinfo").appendChild(r),i.innerText="빌드 시작시간 : "+e.buildTime,a.innerText="성공률 : "+e.pieChartData.datasets[0].data[2]+"%";new Chart(document.getElementById("pieChart_mo"),{type:"pie",data:e.pieChartData,options:{legend:!1}})}})}function init_modal(t,n){return function(){if(document.getElementById("detailPage")){var e=commonXMLHttpRequest();e.open("GET","/getData/getInitialModalData?pi="+t,!0),e.send(),e.addEventListener("load",function(){var i=JSON.parse(e.responseText),a=new Chart(document.getElementById("lineChart_mo"),{type:"line",data:i.innerData[0],options:chartOption}),o=-1;document.getElementById("detailPageLabel").innerText="More Info - "+i.pjLabel[0].pj_name,document.getElementById("platform_mo").innerText="환경 : "+i.initialModalData[0],document.getElementById("team_mo").innerText="팀 : "+i.initialModalData[1],document.getElementById("author_mo").innerText="사용자 : "+i.initialModalData[2],document.getElementById("lineChart_mo").addEventListener("click",function(e){var t=a.getElementsAtEventForMode(e,"index",{intersect:!1});if(0!=t.length){var n=i.pjLabel[0].build_id[t[0]._index];o!=n&&(o=n,init_modal_detail(i.pjLabel[0].pj_id,n))}})}),init_modal_detail(t,n)}}}function urlByBrowser(){var e=navigator.userAgent.toLowerCase();return-1<e.indexOf("msie")||e.indexOf(!1)?document.URL:document.documentURI}function init_charts(){if(document.getElementById("chartDiv")&&"undefined"!=typeof Chart){console.log("init_charts"),Chart.defaults.global.legend=!1,$("#detailPage").on("hidden.bs.modal",function(){var e=r.createElement("canvas");setAttributes(e,{id:"lineChart_mo",height:"50%"}),r.getElementById("panel_mo").removeChild(r.getElementById("lineChart_mo")),r.getElementById("panel_mo").appendChild(e),r.getElementById("detailPageLabel").innerText="More Info - ",r.getElementById("platform_mo").innerText="환경 : ",r.getElementById("team_mo").innerText="팀 : ",r.getElementById("author_mo").innerText="사용자 : ",clear_modalDetail()});var r=document,e=urlByBrowser();e=e.substring(e.indexOf(":")+3);var l=commonXMLHttpRequest();l.open("GET","/getData/getChartData"+e.substring(e.indexOf("/")),!0),l.send(),l.addEventListener("load",function(){var o=JSON.parse(l.responseText),e=o.totalChartCount;function t(i,a){document.getElementById("lineChart"+a).addEventListener("click",function(e){var t=i.getElementsAtEventForMode(e,"index",{intersect:!1}),n=o.pjLabel[a];0!=t.length&&($("#detailPage").modal("show"),init_modal(n.pj_id,n.build_id[t[0]._index])())})}for(var n=0;n<e;n++){var i=o.pjLabel[n].pj_name;"Mobile"===i.slice(1,7)&&(i=i.replace("Mobile","M")),r.getElementById("title"+n).innerText=i,r.getElementById("build"+n).innerText="Last Build : "+o.buildTime[n][1],r.getElementById("duration"+n).innerText="Duration : "+o.duration[n],"-"!==o.pjLink[n]&&(r.getElementById("link"+n).setAttribute("href",o.pjLink[n]),r.getElementById("link"+n).innerText="Report Link");var a=document.getElementById("lineChart"+n);t(new Chart(a,{type:"line",data:o.innerData[n],options:chartOption}),n)}})}}function init_compose(){void 0!==$.fn.slideToggle&&(console.log("init_compose"),$("#compose, .compose-close").click(function(){$(".compose").slideToggle()}))}$(document).ready(function(){init_knob(),init_SmartWizard(),init_charts(),init_select2(),init_compose()}),$(window).on("load",function(){NProgress.done()});